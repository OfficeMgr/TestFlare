<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:fileTags="RoboHelpCheckList.Ran Smart Index">
    <head>
        <meta http_equiv="Content-Language" content="en-us" /><title>CDS087 - Return File Information (deprecated)</title>
        <link rel="stylesheet" type="text/css" href="Resources/Stylesheets/tools.css" />
        <base target="_blank" />
    </head>
    <body>
        <p class="SectionName">
            <MadCap:keyword term="CDS087" />CDS087</p>
        <table class="revision">
            <tr>
                <td>
                    <p class="SectionTitle">Return File Information (deprecated)</p>
                </td>
                <td align="right"><a target="_blank" href="http://dynaweb.excellware.com/cgi-bin/tools.cgi?p=r&amp;pgm=CDS087">Last Revised: 05/28/09</a>
                </td>
            </tr>
        </table>
        <p class="SectionDesc">This called routine is used to return information 
	about a file/program currently opened.&#160; This program has been replaced 
	by <a href="CDS187.htm"><MadCap:keyword term="CDS187" />CDS187</a> and should not be used for new coding, 
	but is still supported for existing code.</p>
        <p>This routine should be used as opposed to the bbx <code><MadCap:keyword term="FID" />FID()</code> function since the contents of the 
	<code>FID()</code> function can vary with operating system and version of 
	business basic.&#160; Using CDS087 makes the calling program hardware and operating system independent.</p>
        <p>Calling Format:</p>
        <p><code>CALL "CDS087", <a href="#F">F</a>, <a href="#F1$">F1$</a>, <a href="#F2$">F2$</a>, <a href="#F3$">F3$</a>, <a href="#F4$">F4$</a>, <a href="#F[ALL]">F[ALL]</a>, <a href="#F5$">F5$</a>, <a href="#F6$">F6$</a>,</code> <a href="#F7$"><code>F7$</code></a></p>
        <table>
            <tr>
                <th colspan="2">CDS087</th>
            </tr>
            <tr>
                <th colspan="2">Input Data Elements</th>
            </tr>
            <tr>
                <td><a name="F"></a><code>F</code>
                </td>
                <td>Device number of file, program, or device currently opened</td>
            </tr>
            <tr>
                <th colspan="2">Output Data Elements</th>
            </tr>
            <tr>
                <td><a name="F1$"></a><code>F1$</code>
                </td>
                <td>Actual <code>FID()</code> function as provided by business basic</td>
            </tr>
            <tr>
                <td><a name="F2$"></a><code>F2$</code>
                </td>
                <td>
                    <MadCap:keyword term="Program Files" />
        Data/Program files: file/program name less any prefix or node.

        <p><MadCap:keyword term="STR" />Devices: normalized device identification. Terminal and Ghost task devices will return a 4 character string of the format XYYY where X=T for terminals, G for ghosts, and YYY is a number from 000 to 999. No alphabetic characters are used.</p></td>
            </tr>
            <tr>
                <td><code>F3$</code>
                </td>
                <td><a name="F3$"></a>File/Device type<table class="lev2"><tr><td>DIR</td><td>Direct Access Disc File</td></tr><tr><td>IND</td><td>Indexed Disc File</td></tr><tr><td>SRT</td><td>Sort Disc File</td></tr><tr><td>SER</td><td>Serial Disc File</td></tr><tr><td>PGM</td><td>Program</td></tr><tr><td>DEV</td><td>Device</td></tr><tr><td>DRY</td><td><MadCap:keyword term="Disc Directory" />Disc Directory</td></tr><tr><td>STR</td><td>String File</td></tr><tr><td><MadCap:keyword term="SKY" />SKY</td><td>Single Key MKEYED file</td></tr><tr><td><MadCap:keyword term="MKY" /><MadCap:keyword term="Define:MKY" />MKY</td><td>Multi-key MKEYED file</td></tr><tr><td>SEL</td><td>Data File opened using <code>SELECT</code> verb</td></tr><tr><td>EPG</td><td>Encrypted Program</td></tr><tr><td>PGn</td><td>Program of version n</td></tr><tr><td>EPn</td><td>Encrypted Program of version n</td></tr><tr><td>???</td><td>Other</td></tr></table></td>
            </tr>
            <tr>
                <td><code>F4$</code>
                </td>
                <td>
                    <table class="lev2">
                        <tr>
                            <td><a name="F4$"></a>Programs</td>
                            <td>First Remark line</td>
                        </tr>
                        <tr>
                            <td>Data</td>
                            <td>the file description from the file data dictionary (passed as null if there are no available devices)</td>
                        </tr>
                        <tr>
                            <td>
                                <MadCap:keyword term="XXSI50" />XXSI50 files</td>
                            <td>
                                <MadCap:keyword term="Company Name" />includes company name</td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td><code>F[ALL]</code>
                </td>
                <td>
                    <table class="lev2">
                        <tr>
                            <td><a name="F[ALL]"></a><code>F[0]</code>
                            </td>
                            <td>
                                <MadCap:keyword term="Date" />Last modification date, julian format</td>
                        </tr>
                        <tr>
                            <td><code>F[1]</code>
                            </td>
                            <td>Keysize for DIR/SRT/SKY file</td>
                        </tr>
                        <tr>
                            <td><code>F[2]</code>
                            </td>
                            <td>
                                <MadCap:keyword term="FIN" />
                                <MadCap:keyword term="Define" />Non-program files: number of records defined program files: always zero</td>
                        </tr>
                        <tr>
                            <td><code>F[3]</code>
                            </td>
                            <td>
              Non-program files: characters per record

              <p>program files: characters defined</p></td>
                        </tr>
                        <tr>
                            <td><code>F[4]</code>
                            </td>
                            <td>SER - next available file index</td>
                        </tr>
                        <tr>
                            <td><code>F[5]</code>
                            </td>
                            <td>file size in characters</td>
                        </tr>
                        <tr>
                            <td><code>F[6]</code>
                            </td>
                            <td>
              MKY, SKY, DIR &amp; SRT files: Number of records in use

              <p><MadCap:keyword term="Indexed Files" />&#160;Indexed Files: Number of records in use based on convention that the first field of the first record contains the last index used.</p><p><MadCap:keyword term="Serial Files" />Program Files: Number of characters in use Serial Files: Number of characters in use</p></td>
                        </tr>
                        <tr>
                            <td><code>F[7]</code>
                            </td>
                            <td>% Full</td>
                        </tr>
                        <tr>
                            <td><code>F[8]</code>
                            </td>
                            <td>Last modification time</td>
                        </tr>
                        <tr>
                            <td><code>F[9]</code>
                            </td>
                            <td>
              Lock Flag:

              <p>Set to 0 if not locked</p><p>Set to 1 if locked</p><p>Set to 2 if <code>F</code> is negative indicating <code>F1$</code> is directory entry to be used as input</p></td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td><a name="F5$"></a><code>F5$</code>
                </td>
                <td>fully specified path name</td>
            </tr>
            <tr>
                <td><a name="F6$"></a><code>F6$</code>
                </td>
                <td>MKY key definition data from <code>FIN()</code><MadCap:keyword term="CDS064" />.&#160; Used when defining MKY files using CDS064 and the 
		<code><MadCap:keyword term="KGEN" />KGEN()</code> function.</td>
            </tr>
            <tr>
                <td><a name="F7$"></a><code>F7$</code>
                </td>
                <td>company code as derived from first two characters of file name after 
		<code><MadCap:keyword term="SMSDIR" />SMSDIR</code> directory. This is useful for the newer 5 character file names used by programs, where the company code is not a part of the program name.</td>
            </tr>
        </table>
        <h5>Special Calling Options:</h5>
        <p>Normally, the calling routine has the file or device opened to channel 
	<code>F</code> and desires the output variables listed above. It is also possible to pass to CDS087 the disc directory entry
	<code>F1$</code> as an input variable in order to obtain the other output variables. To do this, no file must be opened. Instead, pass 
	<code>F</code> as -1, and <code>F1$</code> as the directory entry to be decoded.</p>
        <p>It is sometimes not necessary to obtain the file identification variable 
	<code>F4$</code>. To bypass the logic used to obtain <code>F4$</code> simply call CDS087 with a single blank for the 
	<code>F4$</code> variable.</p>
        <p>Example: <code>CALL "CDS087",1,"",F2$,""," ",F[ALL]</code>. The blank will cause CDS087 to 
	bypass the logic to obtain <code>F4$</code>. This will improve the speed of the routine 
	and reduce the memory requirements.</p>
    </body>
</html>